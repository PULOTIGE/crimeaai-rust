# ๐ VoxelCraiMod - SH-based Voxel Lighting

<div align="center">

![VoxelCrai Banner](https://img.shields.io/badge/VoxelCrai-SH%20Lighting-blue?style=for-the-badge&logo=minecraft)
![Minecraft](https://img.shields.io/badge/Minecraft-1.21.3+-green?style=for-the-badge)
![Fabric](https://img.shields.io/badge/Fabric-0.16.7+-orange?style=for-the-badge)
![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)

**ะะพะบัะตะปัะฝะพะต ะพัะฒะตัะตะฝะธะต ะฝะฐ ะพัะฝะพะฒะต Spherical Harmonics ะฟะฐััะตัะฝะพะฒ**

*ะะตะท ััะฐััะธัะพะฒะบะธ ะปััะตะน โ ัะธััะฐั ะผะฐัะตะผะฐัะธะบะฐ SH ะดะปั 60+ FPS*

</div>

---

## ๐ ะะฟะธัะฐะฝะธะต

VoxelCraiMod โ ััะพ ะผะพะด ะดะปั Minecraft Fabric, ะบะพัะพััะน ัะตะฐะปะธะทัะตั ะฟัะพะดะฒะธะฝััะพะต ะฒะพะบัะตะปัะฝะพะต ะพัะฒะตัะตะฝะธะต ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Spherical Harmonics (SH) ะฟะฐััะตัะฝะพะฒ. ะ ะพัะปะธัะธะต ะพั ััะฐะดะธัะธะพะฝะฝะพะณะพ ััะฐััะธัะพะฒะฐะฝะธั ะปััะตะน, ะผะพะด ะธัะฟะพะปัะทัะตั ะฟัะตะดะฒััะธัะปะตะฝะฝัะต ะฟะฐััะตัะฝั ะพัะฒะตัะตะฝะธั ะดะปั ะดะพััะธะถะตะฝะธั ะฒััะพะบะพะน ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ.

### โจ ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

- **๐ฎ SH-based Global Illumination** โ ะัะณะบะพะต ะฝะตะฟััะผะพะต ะพัะฒะตัะตะฝะธะต ัะตัะตะท ััะตัะธัะตัะบะธะต ะณะฐัะผะพะฝะธะบะธ
- **๐ ะะธะฝะฐะผะธัะตัะบะธะต ัะตะฝะธ** โ ะะตะณะฐัะธะฒะฝัะต SH ะบะพัััะธัะธะตะฝัั ะดะปั ะฑัััััั ะผัะณะบะธั ัะตะฝะตะน
- **โจ ะะฟะฟัะพะบัะธะผะธัะพะฒะฐะฝะฝัะต ะพััะฐะถะตะฝะธั** โ Specular ัะตัะตะท ะฝะฐะฟัะฐะฒะปะตะฝะฝัะน SH ะทะฐะฟัะพั
- **โก 60+ FPS** โ ะะฟัะธะผะธะทะธัะพะฒะฐะฝะพ ะดะปั AMD Radeon VII ะธ ะฒััะต
- **๐ 10,000 ะฟะฐััะตัะฝะพะฒ** โ ะะฐะถะดัะน ะฟะฐััะตัะฝ 1KB ะดะปั ะดะตัะฐะปัะฝะพะณะพ ะพัะฒะตัะตะฝะธั
- **๐ง ะะฐัััะฐะธะฒะฐะตะผะพััั** โ ะกะปะฐะนะดะตัั ะดะปั ะบะพะปะธัะตััะฒะฐ ะฟะฐััะตัะฝะพะฒ (1k-100k), SH bands (3-5)

---

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    VoxelCraiMod Architecture                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ       โ
โ  โ   Pattern    โโโโโถโ   Pattern    โโโโโถโ    SSBO      โ       โ
โ  โ  Generator   โ    โ    Buffer    โ    โ   (GPU)      โ       โ
โ  โ   (CPU)      โ    โ  (10k x 1KB) โ    โ   10 MB      โ       โ
โ  โโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ       โ
โ         โ                                        โ               โ
โ         โผ                                        โผ               โ
โ  โโโโโโโโโโโโโโโโ                        โโโโโโโโโโโโโโโโ       โ
โ  โ   Chunk      โ                        โ   GLSL       โ       โ
โ  โ   Events     โ                        โ  Shaders     โ       โ
โ  โ   (Load/     โ                        โ  (SH Eval)   โ       โ
โ  โ   Unload)    โ                        โโโโโโโโโโโโโโโโ       โ
โ  โโโโโโโโโโโโโโโโ                                โ               โ
โ                                                  โผ               โ
โ                                          โโโโโโโโโโโโโโโโ       โ
โ                                          โ   Final      โ       โ
โ                                          โ   Output     โ       โ
โ                                          โ   (HDR)      โ       โ
โ                                          โโโโโโโโโโโโโโโโ       โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### LightPattern1KB ะกัััะบัััะฐ

```java
// ะะพััะธัะพะฒะฐะฝะพ ะธะท Rust ะฟัะพัะพัะธะฟะฐ
struct LightPattern1KB {
    long id;              // 8 ะฑะฐะนั - ะธะดะตะฝัะธัะธะบะฐัะพั
    // padding           // 8 ะฑะฐะนั
    short[3] directLight;    // 6 ะฑะฐะนั - RGB fp16 ะฟััะผะพะต ะพัะฒะตัะตะฝะธะต
    short[3] indirectLight;  // 6 ะฑะฐะนั - RGB fp16 ะฝะตะฟััะผะพะต ะพัะฒะตัะตะฝะธะต
    byte[256] shCoeffs;      // 256 ะฑะฐะนั - SH ะบะพัััะธัะธะตะฝัั (ะดะพ 4 bands)
    byte[512] materialData;  // 512 ะฑะฐะนั - ะดะฐะฝะฝัะต ะผะฐัะตัะธะฐะปะฐ
    short roughness;         // 2 ะฑะฐะนั - ัะตัะพัะพะฒะฐัะพััั (fp16)
    short metallic;          // 2 ะฑะฐะนั - ะผะตัะฐะปะปะธัะฝะพััั (fp16)
    // ... ะพััะฐะปัะฝัะต ะฟะพะปั
    // ะัะพะณะพ: 1024 ะฑะฐะนั
}
```

### Spherical Harmonics Bands

| Band | ะะพัััะธัะธะตะฝัะพะฒ | ะะฐะทะฝะฐัะตะฝะธะต |
|------|---------------|------------|
| 0    | 1             | DC (ambient) |
| 1    | 3             | ะะฐะฟัะฐะฒะปะตะฝะฝัะน ัะฒะตั |
| 2    | 5             | ะัะณะบะธะต ัะตะฝะธ |
| 3    | 7             | ะะตัะฐะปะธ (ะพะฟัะธะพะฝะฐะปัะฝะพ) |
| 4    | 9             | ะััะพะบะพะต ะบะฐัะตััะฒะพ |

---

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ

### ะขัะตะฑะพะฒะฐะฝะธั

- **Minecraft:** 1.21.3 ะธะปะธ ะฒััะต
- **Fabric Loader:** 0.16.7+
- **Fabric API:** ะะพัะปะตะดะฝัั ะฒะตััะธั
- **Java:** 21+
- **GPU:** Vulkan/OpenGL 4.3+ (ะดะปั SSBO)
- **ะะตะบะพะผะตะฝะดัะตััั:** AMD Radeon VII / NVIDIA RTX 2060 ะธะปะธ ะฒััะต

### ะะฟัะธะพะฝะฐะปัะฝัะต ะทะฐะฒะธัะธะผะพััะธ

- **Iris Shaders:** 1.7.0+ (ะดะปั ะธะฝัะตะณัะฐัะธะธ ั ัะตะนะดะตั-ะฟะฐะบะฐะผะธ)
- **Sodium:** 0.5.0+ (ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ ัะตะฝะดะตัะฐ)

### ะจะฐะณะธ ัััะฐะฝะพะฒะบะธ

1. **ะฃััะฐะฝะพะฒะธัะต Fabric Loader**
   ```bash
   # ะกะบะฐัะฐะนัะต Fabric Installer ั https://fabricmc.net/use/
   java -jar fabric-installer.jar
   ```

2. **ะกะบะฐัะฐะนัะต ะผะพะด**
   ```bash
   # ะะพะผะตััะธัะต voxelcrai-mod-1.0.0.jar ะฒ ะฟะฐะฟะบั mods
   cp voxelcrai-mod-1.0.0.jar ~/.minecraft/mods/
   ```

3. **ะฃััะฐะฝะพะฒะธัะต Fabric API**
   ```bash
   # ะกะบะฐัะฐะนัะต ั https://modrinth.com/mod/fabric-api
   cp fabric-api-*.jar ~/.minecraft/mods/
   ```

4. **(ะะฟัะธะพะฝะฐะปัะฝะพ) ะฃััะฐะฝะพะฒะธัะต Iris + Sodium**
   ```bash
   cp iris-*.jar ~/.minecraft/mods/
   cp sodium-*.jar ~/.minecraft/mods/
   ```

5. **ะะฐะฟัััะธัะต ะธะณัั**
   - ะจะตะนะดะตั-ะฟะฐะบ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัััั ะฒ `shaderpacks/VoxelCrai-SH-Lighting.zip`
   - ะะบัะธะฒะธััะนัะต ัะตัะตะท ะผะตะฝั Iris (ะตัะปะธ ัััะฐะฝะพะฒะปะตะฝ)

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

ะคะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ: `config/voxelcrai.json`

```json
{
  "patternCount": 10000,
  "shBands": 4,
  "patternDensity": 2,
  "maxPatternsPerChunk": 512,
  "enableReflections": true,
  "enableShadows": true,
  "enableGI": true,
  "giIntensity": 1.0,
  "shadowIntensity": 1.0,
  "reflectionIntensity": 0.8,
  "asyncPatternGeneration": true,
  "updateIntervalTicks": 20,
  "debugMode": false
}
```

### ะะฐัะฐะผะตััั

| ะะฐัะฐะผะตัั | ะะธะฐะฟะฐะทะพะฝ | ะะฟะธัะฐะฝะธะต |
|----------|----------|----------|
| `patternCount` | 1,000 - 100,000 | ะะพะปะธัะตััะฒะพ ะฟะฐััะตัะฝะพะฒ (ะฑะพะปััะต = ะฒััะต ะบะฐัะตััะฒะพ) |
| `shBands` | 3 - 5 | ะะพะปะธัะตััะฒะพ SH bands (ะฑะพะปััะต = ัะพัะฝะตะต ัะตะฝะธ) |
| `patternDensity` | 1 - 4 | ะะปะพัะฝะพััั ะฒัะฑะพัะบะธ (1 = ะบะฐะถะดัะน ะฑะปะพะบ) |
| `giIntensity` | 0.0 - 2.0 | ะะฝัะตะฝัะธะฒะฝะพััั GI |
| `shadowIntensity` | 0.0 - 2.0 | ะะฝัะตะฝัะธะฒะฝะพััั ัะตะฝะตะน |
| `reflectionIntensity` | 0.0 - 1.0 | ะะฝัะตะฝัะธะฒะฝะพััั ะพััะฐะถะตะฝะธะน |

---

## ๐ฎ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะขะตััะพะฒัะต ัะตะทัะปััะฐัั (AMD Radeon VII, 1080p)

| ะะฐัััะพะนะบะฐ | ะะฐััะตัะฝั | SH Bands | FPS | VRAM |
|-----------|----------|----------|-----|------|
| Low       | 1,000    | 3        | 120+ | 1 MB |
| Medium    | 5,000    | 3        | 90+  | 5 MB |
| High      | 10,000   | 4        | 60+  | 10 MB |
| Ultra     | 50,000   | 5        | 45+  | 50 MB |

### ะกะพะฒะตัั ะฟะพ ะพะฟัะธะผะธะทะฐัะธะธ

1. **ะกะฝะธะทััะต ะบะพะปะธัะตััะฒะพ ะฟะฐััะตัะฝะพะฒ** ะฝะฐ ัะปะฐะฑัั GPU
2. **ะัะฟะพะปัะทัะนัะต 3 SH bands** ะดะปั ะฑะฐะปะฐะฝัะฐ ะบะฐัะตััะฒะฐ/ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
3. **ะะบะปััะธัะต Sodium** ะดะปั ะพะฑัะตะน ะพะฟัะธะผะธะทะฐัะธะธ ัะตะฝะดะตัะฐ
4. **ะฃะฒะตะปะธัััะต `patternDensity`** ะดะปั ัะฝะธะถะตะฝะธั ะฝะฐะณััะทะบะธ

---

## ๐ฎ ะะปะณะพัะธัะผ SH ะัะฒะตัะตะฝะธั

### ะะตะฝะตัะฐัะธั ะฟะฐััะตัะฝะพะฒ (CPU)

```java
// ะะปั ะบะฐะถะดะพะณะพ ะฑะปะพะบะฐ ะฒ ัะฐะฝะบะต:
for (int i = 0; i < SAMPLE_COUNT; i++) {
    float[] dir = sampleDirections[i];  // ะคะธะฑะพะฝะฐััะธะตะฒะฐ ััะตัะฐ
    float visibility = traceVisibility(chunk, pos, dir);
    projectToSH(dir, visibility, shValues);
}
// ะะพัะผะฐะปะธะทะฐัะธั ะฒ [-127, 127] ะดะปั i8 ััะฐะฝะตะฝะธั
```

### ะะตะบะพะฝััััะบัะธั ะฒ ัะตะนะดะตัะต (GPU)

```glsl
// ๐ฎ ะััะธัะปะตะฝะธะต SH ะฑะฐะทะธัะฝัั ััะฝะบัะธะน
float[16] basis = computeSHBasis(normal, bands);

// ๐ ะะตะบะพะฝััััะบัะธั ะพัะฒะตัะตะฝะธั
float irradiance = 0.0;
for (int i = 0; i < numCoeffs; i++) {
    irradiance += coeffs[i] * basis[i];
}

// ๐ก ะัะธะผะตะฝะตะฝะธะต ะบะพัะธะฝััะฝะพะน ัะฒะตััะบะธ ะดะปั diffuse
irradiance *= cosineLobeCoeffs[band];
```

---

## ๐๏ธ ะกะฑะพัะบะฐ ะธะท ะธััะพะดะฝะธะบะพะฒ

```bash
# ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั
git clone https://github.com/voxelcrai/voxelcrai-mod.git
cd voxelcrai-mod

# ะกะฑะพัะบะฐ
./gradlew build

# ะะตะทัะปััะฐั ะฒ build/libs/voxelcrai-mod-1.0.0.jar
```

### ะขัะตะฑะพะฒะฐะฝะธั ะดะปั ัะฑะพัะบะธ

- JDK 21+
- Gradle 8.5+

---

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

- **Rethinking Voxels** (gri573) โ ะฒะดะพัะฝะพะฒะตะฝะธะต ะดะปั ััััะบัััั ัะตะนะดะตั-ะฟะฐะบะฐ
- **Iris Shaders Team** โ API ะดะปั ะธะฝัะตะณัะฐัะธะธ ัะตะนะดะตัะพะฒ
- **Fabric Team** โ ะผะพะดะปะพะฐะดะตั ะธ API

---

## ๐ ะะธัะตะฝะทะธั

MIT License โ ัะผ. [LICENSE-MIT](LICENSE-MIT)

---

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

1. Fork ัะตะฟะพะทะธัะพัะธั
2. ะกะพะทะดะฐะนัะต feature branch (`git checkout -b feature/amazing-feature`)
3. Commit ะธะทะผะตะฝะตะฝะธั (`git commit -m 'Add amazing feature'`)
4. Push ะฒ branch (`git push origin feature/amazing-feature`)
5. ะัะบัะพะนัะต Pull Request

---

<div align="center">

**๐ VoxelCraiMod โ ะะพะบัะตะปัะฝะพะต ะพัะฒะตัะตะฝะธะต ะฑัะดััะตะณะพ! ๐**

*Made with โค๏ธ and Spherical Harmonics*

</div>
