#!/bin/bash

echo "ü§ñ AI –ß–∞—Ç –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç - –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
echo "========================================"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Rust
echo "üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
RUST_VERSION=$(rustc --version 2>/dev/null)
if [ $? -eq 0 ]; then
    echo "‚úÖ Rust: $RUST_VERSION"
else
    echo "‚ùå Rust –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
    echo "   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: https://rustup.rs/"
    exit 1
fi

echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
if [ -f "target/release/ai-chat" ]; then
    echo "‚úÖ –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω"
    echo ""
    echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
    echo ""
    ./target/release/ai-chat
else
    echo "‚öôÔ∏è  –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤—ã–ø–æ–ª–Ω—è—é —Å–±–æ—Ä–∫—É..."
    echo ""
    cargo build --release
    
    if [ $? -eq 0 ]; then
        echo ""
        echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
        echo ""
        echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
        echo ""
        ./target/release/ai-chat
    else
        echo ""
        echo "‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏!"
        echo "   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥ –≤—ã—à–µ"
        exit 1
    fi
fi
